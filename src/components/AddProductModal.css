:root {
  --bg: #ffffff;
  --bg-muted: #f7f8fa;
  --text: #1f2937;
  --text-muted: #5b6470;
  --border: #e3e6ea;
  --input: #ffffff;
  --input-border: #cfd3d7;
  --input-border-hover: #b7bcc2;
  --ring: #3b82f6;
  --ring-weak: rgba(59,130,246,.2);
  --primary: #0d6efd;
  --primary-hover: #0b61df;
  --primary-active: #094fb5;
  --secondary: #6c757d;
  --secondary-hover: #5f676f;
  --secondary-disabled: #d6d9dd;

  --radius-sm: 8px;
  --radius-md: 10px;
  --radius-lg: 14px;

  --shadow-sm: 0 1px 2px rgba(0,0,0,.04);
  --shadow-md: 0 6px 24px rgba(16,24,40,.08);

  --space-1: 4px;
  --space-2: 6px;
  --space-3: 8px;
  --space-4: 10px;
  --space-5: 12px;
  --space-6: 14px;
  --space-7: 16px;
  --space-8: 18px;
}

/* Modal chrome */
.modal-content { background: var(--bg); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); }
.modal-header { padding-bottom: var(--space-6); margin-bottom: var(--space-6); border-bottom: 1px solid var(--border); }
.modal-header h2 { color: var(--text); font-weight: 800; letter-spacing: .2px; }
.close-button { border: 0; background: transparent; font-size: 28px; line-height: 1; color: #98a2b3; cursor: pointer; }
.close-button:hover { color: #667085; }
.modal-footer { border-top: 1px solid var(--border); padding-top: var(--space-6); margin-top: var(--space-6); text-align: center; }

/* Base form */
.form-group { margin-bottom: 15px; }
.form-group label { display: block; margin-bottom: var(--space-3); font-weight: 700; color: var(--text); }

/* Inputs + Selects */
.form-group input, .form-group select {
  width: 100%;
  padding: var(--space-5) var(--space-6);
  font-size: 1rem;
  color: var(--text);
  background: var(--input);
  border: 1px solid var(--input-border);
  border-radius: var(--radius-sm);
  box-sizing: border-box;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
}
.form-group input::placeholder, .form-group select::placeholder { color: #9aa3ab; }
.form-group input:hover, .form-group select:hover { border-color: var(--input-border-hover); }
.form-group input:focus, .form-group select:focus { outline: 0; border-color: var(--ring); box-shadow: 0 0 0 3px var(--ring-weak); }

/* Optional select caret */
.selectlike {
  appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, #6b7680 50%),
    linear-gradient(135deg, #6b7680 50%, transparent 50%),
    linear-gradient(to right, var(--input-border), var(--input-border));
  background-position:
    calc(100% - 18px) calc(50% - 3px),
    calc(100% - 12px) calc(50% - 3px),
    calc(100% - 32px) 50%;
  background-size: 6px 6px, 6px 6px, 1px 60%;
  background-repeat: no-repeat;
  cursor: pointer;
}

/* Buttons */
.add-btn {
  background: var(--primary); color: #fff; padding: 10px 20px; font-size: 1rem; font-weight: 700;
  border: 0; border-radius: var(--radius-md); cursor: pointer; box-shadow: var(--shadow-sm);
  transition: transform .05s ease, filter .15s ease, background .15s ease;
}
.add-btn:hover { background: var(--primary-hover); filter: brightness(.98); }
.add-btn:active { background: var(--primary-active); transform: translateY(1px); }
.manage-btn {
  padding: 10px 14px; background: var(--secondary); color: #fff; border: 0; border-radius: var(--radius-sm);
  font-weight: 700; box-shadow: var(--shadow-sm); transition: background .15s ease, transform .05s ease;
}
.manage-btn:hover { background: var(--secondary-hover); }
.manage-btn:active { transform: translateY(1px); }
.manage-btn:disabled { background: var(--secondary-disabled); color: #f1f3f6; cursor: not-allowed; }

/* Inline category label row with compact trash icon */
.category-label-row { display: flex; align-items: center; justify-content: space-between; }
.icon-btn { border: 1px solid transparent; background: transparent; padding: 4px; border-radius: 6px; cursor: pointer; }
.icon-btn .icon { width: 16px; height: 16px; display: block; }
.icon-btn.danger { color: #dc3545; }
.icon-btn.danger:hover { background: #fde2e4; }
.icon-btn:disabled { opacity: .4; cursor: not-allowed; }

/* SKU layout */
.modal-content .category-group {
  display: grid;
  grid-template-columns: 1fr auto; /* [Category] [Manage] */
  gap: var(--space-5);
  align-items: end;
}

/* Category SKU row (inline label + input, indented) */
.modal-content .category-sku-group {
  grid-column: 1 / 2;
  display: grid;
  grid-template-columns: auto 1fr; align-items: center; column-gap: var(--space-4);
  width: auto; max-width: 360px; margin-left: 22px; margin-top: 0;
}
.modal-content .category-sku-group > label { margin: 0; font-size: .92rem; color: var(--text-muted); white-space: nowrap; }
.modal-content .category-sku-group > input {
  height: 32px; line-height: 32px; padding: 6px 10px; font-size: .95rem; border-radius: var(--radius-sm);
  background: var(--input);
}
.modal-content .category-group > .form-group:first-child { margin-bottom: 2px; }

/* Tight stack for Flavor + Flavor SKU */
.modal-content .tight-stack { display: grid; row-gap: 0; }
.modal-content .tight-stack > #flavor-group { margin-bottom: 0; }
.modal-content .tight-stack > #flavor-sku-wrap { margin-top: -8px; } /* adjust -6/-10 to taste */

/* Flavor SKU row (inline label + chip + input, indented) */
.modal-content .form-group#flavor-sku-wrap {
  display: grid; grid-template-columns: auto 1fr; align-items: center; column-gap: var(--space-4);
  margin-left: 22px; max-width: 620px;
}
.modal-content .form-group#flavor-sku-wrap > label[for="flavor-sku"] {
  margin: 0; font-size: .92rem; color: var(--text-muted); white-space: nowrap;
}
.modal-content .form-group#flavor-sku-wrap > .flavor-sku-group {
  margin: 20px 0 0 0; display: grid; grid-template-columns: auto 1fr; align-items: center; column-gap: var(--space-3);
}

/* Grey SKU prefix chip (the "-" or "SK-") */
.modal-content .form-group#flavor-sku-wrap .flavor-sku-group .sku-prefix {
  height: 32px; line-height: 32px; padding: 0 10px; min-width: 52px; text-align: center;
  color: #8a94a0; background: var(--bg-muted); border: 1px solid var(--border);
  border-radius: var(--radius-sm); font-weight: 600;
}

/* Make both SKU input widths match exactly (left-aligned text) */
.modal-content .category-sku-group input,
.modal-content #flavor-sku-wrap .flavor-sku-group input {
  width: 220px; max-width: 220px; flex-grow: 0; text-align: left;
}

/* Footer rhythm */
.modal-content .modal-footer { margin-top: 8px; padding-top: 8px; }

/* Consolidated preview box */
.product-preview {
  margin: 12px 0 8px;
  padding: 14px 16px;
  border: 1px solid var(--border);
  background: var(--bg-muted);
  border-radius: var(--radius-md);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}
.product-preview .preview-value {
  font-size: 1.05rem;
  font-weight: 800;
  color: var(--text);
  letter-spacing: .2px;
}
.product-preview .preview-sku {
  font-size: .92rem;
  font-weight: 400;
  color: var(--text-muted);
}

/* Tablet optimizations */
@media (min-width: 768px) and (max-width: 1024px) {
  .modal-content {
    max-width: 850px;
    padding: 28px;
  }

  .modal-header h2 {
    font-size: 1.6em;
  }

  .close-button {
    font-size: 3rem;
  }

  .form-group label {
    font-size: 1.1em;
    margin-bottom: 10px;
  }

  .form-group input, .form-group select {
    padding: 14px 18px;
    font-size: 1.1em;
    min-height: 52px;
  }

  .add-btn, .manage-btn {
    padding: 14px 24px;
    font-size: 1.1em;
    min-height: 56px;
  }

  .category-sku-group > input,
  #flavor-sku-wrap .flavor-sku-group input {
    height: 44px;
    line-height: 44px;
    padding: 10px 14px;
    font-size: 1.05rem;
  }

  .flavor-sku-group .sku-prefix {
    height: 44px;
    line-height: 44px;
    padding: 0 14px;
    font-size: 1.05rem;
  }

  .product-preview {
    padding: 18px 20px;
  }

  .product-preview .preview-value {
    font-size: 1.2rem;
  }

  .product-preview .preview-sku {
    font-size: 1.05rem;
  }
}
